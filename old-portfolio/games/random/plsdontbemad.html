<html>

	<head>

		<style>
			body {
				overflow: hidden;
			}
			#drawStuff {
				display : block;
				position: absolute;
				left : 0;
				right : 0;
				margin: 0px;
				padding : 0px;
				background-color: rgb(20, 20, 20);
			}
		</style>
	</head>


	<body>


		<canvas id = "drawStuff"> </canvas>


		<script type="text/javascript">

			let c = document.getElementById("drawStuff");
		    window.onresize = resizeCanvasToScreen();

			function resizeCanvasToScreen() {
				c.width = window.innerWidth;
				c.height = window.innerHeight;
			}


			let ctx = c.getContext('2d');

			let gameobjects = [];

			function clearScreen () {
				ctx.beginPath();
				ctx.rect(0, 0, c.width, c.height);
				ctx.fillStyle = "rgba(20, 20, 20, .2)";
				ctx.fill();
			}

			class shape {
				constructor (x, y, color) {
					this.x = x;
					this.y = y;
					this.color = color;
				}

				draw (ctx) {}

			}

			class ripple extends shape {
				constructor (x, y, color, expension, grothSpeed) {
					super(x, y, color);
					this.expension = expension;
					this.grothSpeed = grothSpeed;

					this.collided = false;
					this.shouldDestroy = false;
				}

				update () {

					this.checkIfNotNegatiflyGrowing();
					if (this.collided == true && this.grothSpeed > 0) this.toggleGrothSpeed();

					this.grow(1);

					this.collided = false;

				}

				checkIfYouShouldDestroyMe () {
					if ( this.shouldDestroy || this.expension > window.innerWidth * 4) return true;
					else return false;

				}

				checkIfNotNegatiflyGrowing() {
					if (this.expension < this.grothSpeed * 2 && this.grothSpeed < 0) {
						this.toggleGrothSpeed();
						this.expension = this.grothSpeed;
					}
				}

				toggleGrothSpeed () {
					if (this.grothSpeed < 0) this.shouldDestroy = true;
					this.grothSpeed = -this.grothSpeed;
				}

				grow (multyplier) {
					this.expension += this.grothSpeed * multyplier;
				}

				checkCollision (other) {
					if ( other != this){
						let distance = Math.sqrt((this.x - other.x) ** 2 + (this.y - other.y) **2);
						let addedRadii = this.expension + other.expension;
						if (distance <  addedRadii && distance > addedRadii - 20) {
							return true;
						}
					} return false;
				}

				draw (ctx) {
					ctx.beginPath();
					try {
						ctx.arc (this.x, this.y, this.expension, 0, 2*Math.PI);
					} catch (err) {}
					ctx.strokeStyle = this.color;
					ctx.stroke();
				}
			}

			function updateObjects () {
				gameobjects.forEach(obj => {
					obj.update();
				});
			}

			function drawObjects () {
				gameobjects.forEach(obj => {
					obj.draw(ctx);
				});
			}

			function checkCollisions () {
				gameobjects.forEach(obj => {
					gameobjects.forEach(otherObj => {
						obj.collided = obj.checkCollision(otherObj);
					});
				});
			}

			function spawnRandomRipple () {
				gameobjects.push(new ripple(Math.random() * window.innerWidth, Math.random() * window.innerHeight, Math.random() <= .5 ? "blue": "red", 0, Math.random() * 8 + 2));
			}

			function checkForSuicidalObjects () {
				for (let i = gameobjects.length -1; i >= 0; i--) {
					if (gameobjects[i].checkIfYouShouldDestroyMe() == true) {
						gameobjects.splice(i, 1);
					}
				}
			}

			document.addEventListener("click", mouseClicked);

			function mouseClicked (e) {
				//gameobjects.push(new ripple (e.x, e.y, Math.random() <= .5 ? "blue" : "red"  , 0, Math.random() * 8 + 2));
				gameobjects = [];
			}

			setInterval (() => {

				clearScreen();
				spawnRandomRipple();

				checkCollisions();
				updateObjects();
				checkForSuicidalObjects();

				drawObjects();
			}, 1000/60);

		</script>

	</body>


</html>
